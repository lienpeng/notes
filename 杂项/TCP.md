netstat
-a 显示所有
-t 显示TCP
-u 显示UDP
-p 显示对应的程序和PID
-n 直接使用IP 而不通过域名服务器
-l 只显示监听的端口 也就是作为服务端的端口

TCP状态 
CLOSED状态：初始状态，表示TCP连接是“关闭的”或者“未打开的”

LISTEN状态：表示服务端的某个端口正处于监听状态，正在等待客户端连接的到来

SYN_SENT状态：当客户端发送SYN请求建立连接之后，客户端处于SYN_SENT状态，等待服务器发送SYN+ACK

SYN_RCVD状态：当服务器收到来自客户端的连接请求SYN之后，服务器处于SYN_RCVD状态，在接收到SYN请求之后会向客户端回复一个SYN+ACK的确认报文

ESTABLISED状态：当客户端回复服务器一个ACK和服务器收到该ACK（TCP最后一次握手）之后，服务器和客户端都处于该状态，表示TCP连接已经成功建立

FIN_WAIT_1状态：当数据传输期间当客户端想断开连接，向服务器发送了一个FIN之后，客户端处于该状态

FIN_WAIT_2状态：当客户端收到服务器发送的连接断开确认ACK之后，客户端处于该状态

CLOSE_WAIT状态：当服务器发送连接断开确认ACK之后但是还没有发送自己的FIN之前的这段时间，服务器处于该状态

TIME_WAIT状态：当客户端收到了服务器发送的FIN并且发送了自己的ACK之后，客户端处于该状态

LAST_ACK状态：表示被动关闭的一方（比如服务器）在发送FIN之后，等待对方的ACK报文时，就处于该状态

CLOSING状态：连接断开期间，一般是客户端发送一个FIN，然后服务器回复一个ACK，然后服务器发送完数据后再回复一个FIN，当客户端和服务器同时接受到FIN时，客户端和服务器处于CLOSING状态，也就是此时双方都正在关闭同一个连接


# 1、三次握手
## 标志位
- SYN 发起一个连接
- ACK 应答确认
- FIN 释放连接

三次握手的目的是连接服务器指定端口，建立TCP连接，并同步连接双方的序列号和确认号，交换TCP窗口大小信息。在socket编程中，客户端执行connect()时将触发三次握手。

- 第一次握手 客户端发送SYN=1 seq=xz(客户端SYN_send)
- 第二次握手 服务端发送ACK=1 SYN=1 ack=x+1 seq=y(服务端SYN_RESV)
- 第三次握手 客户端发送ACK=1 ack=y+1 seq=x+1 SYN=0(客户端发送后ESTABLISHED,服务端收到ESTABLISHED)

